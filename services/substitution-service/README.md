# Substitution Service

| File | Responsibility |
| --- | --- |
| src/controllers/SubstitutionController.ts | API layer |
| src/domain/SubstitutionEngine.ts | Rule matching |
| src/infra/SubstitutionRepo.ts | DB access |
| src/workers/PreferenceLearner.ts | Event consumer |
